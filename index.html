<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>نظام النتائج المدرسية</title>
  <style>
    body {font-family: Tahoma; background:#f2f2f2; margin:0; padding:0}
    .container {max-width:600px; margin:40px auto; background:#fff; padding:20px; border-radius:8px; box-shadow:0 0 10px #ccc}
    h2 {text-align:center}
    input, button {width:100%; padding:10px; margin:8px 0}
    button {background:#007bff; color:#fff; border:none; cursor:pointer}
    button:hover {background:#0056b3}
    .hidden {display:none}
    .result {background:#e9ffe9; padding:10px; margin-top:10px; border-radius:5px}
  </style>
</head>
<body><div class="container">
  <h2>نظام النتائج المدرسية</h2>
  <button onclick="showTeacher()">واجهة المعلم</button>
  <button onclick="showStudent()">واجهة الطالب</button>
</div><div class="container hidden" id="teacher">
  <h2>واجهة المعلم (مقفلة)</h2>
  <input type="password" id="pin" placeholder="أدخل القفل الرقمي">
  <button onclick="unlock()">فتح</button>  <div id="teacherPanel" class="hidden">
    <input id="t_name" placeholder="اسم الطالب">
    <input id="t_seat" placeholder="رقم الجلوس">
    <input id="t_result" placeholder="النتيجة">
    <button onclick="saveResult()">حفظ النتيجة</button>
    <button onclick="back()">رجوع</button>
  </div>
</div><div class="container hidden" id="student">
  <h2>واجهة الطالب</h2>
  <input id="s_name" placeholder="اسم الطالب">
  <input id="s_seat" placeholder="رقم الجلوس">
  <button onclick="getResult()">عرض النتيجة</button>
  <div id="output"></div>
  <button onclick="back()">رجوع</button>
</div><script>
let lockPin = localStorage.getItem('pin') || null;

function showTeacher(){
  hideAll(); document.getElementById('teacher').classList.remove('hidden');
}
function showStudent(){
  hideAll(); document.getElementById('student').classList.remove('hidden');
}
function back(){location.reload();}
function hideAll(){document.querySelectorAll('.container').forEach(c=>c.classList.add('hidden'));}

function unlock(){
  let p = document.getElementById('pin').value;
  if(!lockPin){ localStorage.setItem('pin', p); lockPin=p; }
  if(p===lockPin){ document.getElementById('teacherPanel').classList.remove('hidden'); }
  else alert('القفل غير صحيح');
}

function saveResult(){
  let data = {
    name: t_name.value,
    seat: t_seat.value,
    result: t_result.value
  };
  let key = data.name + '_' + data.seat;
  localStorage.setItem(key, JSON.stringify(data));
  alert('تم حفظ النتيجة');
}

function getResult(){
  let key = s_name.value + '_' + s_seat.value;
  let data = localStorage.getItem(key);
  if(data){
    let d = JSON.parse(data);
    output.innerHTML = `<div class='result'>الاسم: ${d.name}<br>النتيجة: ${d.result}</div>`;
  } else output.innerHTML='لا توجد نتيجة';
}
</script></body>
</html>